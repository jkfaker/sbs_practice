(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-teacher-tManage-tManage"],{"00c0":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uNotify:n("5916").default,uniPopup:n("5e9c").default,uniPopupDialog:n("2c98").default,uniSection:n("4ac9").default,uniEasyinput:n("062f").default,uGap:n("7b88").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"container"},[n("u-notify",{ref:"uNotify"}),n("uni-popup",{ref:"alertDialog",attrs:{type:"dialog"}},[n("uni-popup-dialog",{attrs:{type:"error",cancelText:"取消",confirmText:"删除",title:"教师删除",content:"确定删除吗？"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.subDelete()}}})],1),t._l(t.departList,(function(e,a){return n("v-uni-view",{key:a,staticClass:"list"},[n("uni-section",{attrs:{title:e,type:"line",padding:!0}},[t.findByDepartId(a).length?t._e():n("v-uni-view",{staticStyle:{color:"blueviolet","font-size":"20px"}},[t._v("暂无负责老师")]),t._l(t.findByDepartId(a),(function(e,a){return n("v-uni-view",{key:a},[n("v-uni-view",{staticClass:"input-box"},[n("uni-easyinput",{attrs:{styles:t.styles,placeholderStyle:t.placeholderStyle,placeholder:"教师工号"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.input.apply(void 0,arguments)}},model:{value:e.id,callback:function(n){t.$set(e,"id",n)},expression:"item.id"}}),n("uni-easyinput",{attrs:{styles:t.styles,placeholderStyle:t.placeholderStyle,placeholder:"教师姓名"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.input.apply(void 0,arguments)}},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"item.name"}})],1),n("u-gap",{attrs:{height:"10"}}),n("v-uni-view",{staticClass:"buttons"},[n("v-uni-button",{attrs:{size:"mini",type:"warn"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.clickDelete(e)}}},[t._v("删除")]),n("v-uni-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.submit(e)}}},[t._v("提交")])],1),n("u-gap",{attrs:{height:"10"}})],1)})),n("u-gap",{attrs:{height:"20"}}),n("v-uni-button",{attrs:{size:" default",type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addTeacher(a)}}},[t._v("添加老师")])],2)],1)}))],2)},o=[]},1245:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("aa9c"),n("8f71"),n("bf0f");var a={data:function(){return{departList:["管理员","文法学院","商务信息学院","商务经济学院","商务外语学院","艺术设计学院","酒店管理学院","工商管理学院"],teacherList:[],deleteId:0,teacher:{id:0,name:"",departId:1}}},onLoad:function(){this.getAllTeacher()},methods:{notify:function(t,e){this.$refs.uNotify.show({top:10,type:t,message:e,duration:3e3,fontSize:20})},clickDelete:function(t){this.deleteId=t.id,this.$refs.alertDialog.open()},submit:function(t){var e=this;uni.request({url:getApp().globalData.URL+"/teacher/info/update",header:{token:uni.getStorageSync("token")},method:"POST",data:t,success:function(t){console.log(t),0!==t.data.code?(e.notify("success","已完成数据变更"),e.getAllTeacher()):e.notify("error",t.data.msg)},fail:function(t){console.log(t),e.notify("error","网络异常！")}})},addTeacher:function(t){this.teacherList.push({name:"",departId:t})},findByDepartId:function(t){return console.log(t),this.teacherList.filter((function(e){return e.departId===t}))},getAllTeacher:function(){var t=this;uni.request({url:getApp().globalData.URL+"/teacher/info/all",header:{token:uni.getStorageSync("token")},method:"GET",success:function(e){console.log(e),0!==e.data.code?t.teacherList=e.data.data:t.notify("error",e.data.msg)},fail:function(e){console.log(e),t.notify("error","网络异常！")}})},subDelete:function(){var t=this;console.log(this.deleteId),uni.request({url:getApp().globalData.URL+"/teacher/info/delete",header:{token:uni.getStorageSync("token")},method:"POST",data:{id:this.deleteId},success:function(e){console.log(e),0!==e.data.code?(t.notify("success","数据已删除"),t.getAllTeacher()):t.notify("error",e.data.msg)},fail:function(e){console.log(e),t.notify("error","网络异常！")}})}}};e.default=a},8306:function(t,e,n){"use strict";var a=n("d908"),i=n.n(a);i.a},a9a8:function(t,e,n){"use strict";n.r(e);var a=n("1245"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},c35c:function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,".buttons[data-v-dca77008]{display:flex;flex-direction:row;height:30px}.input-box[data-v-dca77008]{display:flex;justify-content:space-between;align-items:center}",""]),t.exports=e},cda5:function(t,e,n){"use strict";n.r(e);var a=n("00c0"),i=n("a9a8");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("8306");var u=n("828b"),c=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"dca77008",null,!1,a["a"],void 0);e["default"]=c.exports},d908:function(t,e,n){var a=n("c35c");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("6e846451",a,!0,{sourceMap:!1,shadowMode:!1})}}]);